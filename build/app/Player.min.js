/*!
 * Player: Core of player routine.
 * Copyright (c) 2012-2016 Martin Borik <mborik@users.sourceforge.net>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom
 * the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS
 * OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF
 * OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
var pMode={PM_SONG:1,PM_POSITION:2,PM_SONG_OR_POS:3,PM_SAMPLE:4,PM_LINE:8,PM_SAMP_OR_LINE:12,PM_SIMULATION:129},pTone=function(){function a(a){void 0===a&&(a=0),this.cent=0,this.oct=0,this.txt="---",this.word=a}return Object.defineProperty(a.prototype,"word",{get:function(){return 255&this.cent|(7&this.oct)<<8},set:function(a){this.cent=255&a,this.oct=(1792&a)>>8},enumerable:!0,configurable:!0}),a}(),pVolume=function(){function a(){this.L=0,this.R=0}return Object.defineProperty(a.prototype,"byte",{get:function(){return 15&this.L|(15&this.R)<<4},set:function(a){this.L=15&a,this.R=a>>4&15},enumerable:!0,configurable:!0}),a}(),pMixer=function(){function a(){this.index=0,this.length=0}return a}(),pPosition=function(){function a(a,b){void 0===b&&(b=6),this.ch=[],this.speed=b,this.length=a,this.frames=[],this.initParams=void 0;for(var c=0;6>c;c++)this.ch[c]={pattern:0,pitch:0};for(var c=0,d=0;d<=Player.maxPatternLen;d++,c+=b)this.frames[d]=c}return a.prototype.hasPattern=function(a){return this.indexOf(a)>=0},a.prototype.indexOf=function(a){for(var b=0,c=-1;0>c&&6>b;b++)this.ch[b].pattern===a&&(c=b);return c},a}(),__extends=jQuery.extend,pRuntime=function(a){function b(b){a.call(this),this.params=[],this.clearPlayParams=function(a){0>a||a>=6||(this.params[a]&&(delete this.params[a].attenuation,this.params[a]=null),this.params[a]={tone:0,playing:!1,sample:b.sample[0],ornament:b.ornament[0],sample_cursor:0,ornament_cursor:0,attenuation:new pVolume,slideShift:0,globalPitch:0,released:!1,command:0,commandParam:0,commandPhase:0,commandValue1:0,commandValue2:0})};for(var c=0;6>c;c++)this.clearPlayParams(c)}return __extends(b,a),b.prototype.setRegData=function(a,b){var c="R"+a.toHex(2).toUpperCase();this.regs[c]=b},b.prototype.replace=function(a){var b,c,d=a.regs,e=this.regs;for(c in e)e.hasOwnProperty(c)&&d.hasOwnProperty(c)&&(e[c]=d[c]);for(b=0;6>b;b++){e=this.params[b],d=a.params[b];for(c in e)e.hasOwnProperty(c)&&d.hasOwnProperty(c)&&(e[c]instanceof pVolume?(e[c].L=d[c].L,e[c].R=d[c].R):e[c]=d[c])}},b}(SAASoundRegData),Player=function(){function a(a){this.SAA1099=a,this.sample=[],this.ornament=[];var b=[{freq:5,prefix:"B-"},{freq:33,prefix:"C-"},{freq:60,prefix:"C#"},{freq:85,prefix:"D-"},{freq:109,prefix:"D#"},{freq:132,prefix:"E-"},{freq:153,prefix:"F-"},{freq:173,prefix:"F#"},{freq:192,prefix:"G-"},{freq:210,prefix:"G#"},{freq:227,prefix:"A-"},{freq:243,prefix:"A#"},{freq:255,prefix:"B-"}];this.tones=[new pTone];for(var c,d,e=1,f=0,g=1;96>=e;e++,g++)d=new pTone,d.txt=b[g].prefix+(f+1),c=b[g].freq,255===c&&7>f&&(f++,g=0,c=b[g].freq),d.oct=f,d.cent=c,this.tones[e]=d;this.mixer=new pMixer,this.setInterrupt(50),this.loopMode=!0,this.clearSong(!0),this.stopChannel(),this.mode=0}return a.prototype.clearSong=function(a){if(this.position=[],this.pattern=[],this.addNewPattern(),this.changedLine=!0,this.changedPosition=!0,this.currentPosition=0,this.repeatPosition=0,this.currentSpeed=6,this.currentLine=0,this.currentTick=0,a)this.clearSamples(),this.clearOrnaments(),this.rtSong=new pRuntime(this),this.rtSample=new pRuntime(this),this.nullPosition=this.addNewPosition(64,6,!1);else for(var b=0;6>b;b++)this.rtSong.clearPlayParams(b)},a.prototype.clearSamples=function(){for(var a=0;32>a;a++){this.sample[a]={name:"",data:[],loop:0,end:0,releasable:!1};for(var b=0;256>b;b++)this.sample[a].data[b]={volume:new pVolume,enable_freq:!1,enable_noise:!1,noise_value:0,shift:0}}},a.prototype.clearOrnaments=function(){for(var a=0;16>a;a++)this.ornament[a]={name:"",data:new Int8Array(256),loop:0,end:0}},a.prototype.addNewPattern=function(){var b,c=this.pattern.length,d={data:[],end:0};for(b=0;b<a.maxPatternLen;b++)d.data[b]={tone:0,release:!1,smp:0,orn:0,orn_release:!1,volume:new pVolume,cmd:0,cmd_data:0};return this.pattern.push(d),c},a.prototype.addNewPosition=function(a,b,c){var d=new pPosition(a,b);return d.initParams=new pRuntime(this),(void 0===c||c===!0)&&this.position.push(d),d},a.prototype.setInterrupt=function(a){this.mixer.length=SAASound.sampleRate/a},a.prototype.getAudio=function(a,b,c){if(!this.mode)return this.SAA1099.output(a,b,c);for(var d,e=0;c>e;){if(this.mixer.index>=this.mixer.length&&(this.mixer.index=0,this.mode!==pMode.PM_SIMULATION)){var f=this.prepareFrame();this.SAA1099.setAllRegs(f)}d=this.mixer.length-this.mixer.index,e+d>c&&(d=c-e),this.SAA1099.output(a,b,d,e),this.mixer.index+=d,e+=d}},a.prototype.simulation=function(a,b,c){if(0>=a)return!1;void 0===b&&(b=this.currentPosition),void 0===c&&(c=this.rtSong);var d,e,f=this.position[b];if(!f)return!1;for(e=this.mode,this.currentPosition!==b&&(d={pos:this.currentPosition,line:this.currentLine,tick:this.currentTick,speed:this.currentSpeed},this.currentPosition=b),this.currentLine=0,this.currentTick=0,this.currentSpeed=f.speed,c.replace(f.initParams),this.mode=pMode.PM_SIMULATION,this.prepareLine(!1,c),this.changedLine=!1,this.changedPosition=!1;a>0;)if(this.prepareFrame(c),this.changedLine&&(this.changedLine=!1,a--),this.changedPosition){this.changedPosition=!1;break}return d?(this.currentLine=d.line,this.currentTick=d.tick,this.currentSpeed=d.speed,this.currentPosition=d.pos):this.currentTick++,this.mode=e,!0},a.prototype.prepareFrame=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=new pVolume,q=0,r=0,s=0,t=0,u=0,v=0;if(void 0===b&&(b=this.mode===pMode.PM_SAMPLE?this.rtSample:this.rtSong),!this.mode)return b;for(e=5;e>=0;e--)if(c=b.params[e],o=1<<e,f=e>>1,g=~~(e>=3),c.playing){switch(l=c.sample.data[c.sample_cursor],!c.sample.releasable&&c.sample_cursor>=c.sample.end?l=this.sample[0].data[0]:v|=o,p.byte=l.volume.byte,d=c.ornament.data[c.ornament_cursor],h=l.noise_value|l.enable_noise<<2,i=c.command,j=(240&c.commandParam)>>4,k=15&c.commandParam,i){case 1:case 2:!c.commandPhase&&c.commandParam&&(c.commandPhase=j),c.commandPhase&&!--c.commandPhase&&(c.slideShift+=k*(1&i?1:-1));break;case 3:!c.commandPhase&&c.commandParam&&(c.commandPhase=j),c.commandValue1&&c.commandPhase&&!--c.commandPhase&&(c.commandValue2>0?(c.slideShift+=k,c.slideShift>=c.commandValue2&&(c.tone=c.commandValue1,c.slideShift=c.commandValue1=c.commandValue2=0,i=-1)):(c.slideShift-=k,c.slideShift<=c.commandValue2&&(c.tone=c.commandValue1,c.slideShift=c.commandValue1=c.commandValue2=0,i=-1)));break;case 4:c.commandParam?(j?c.commandPhase=c.commandPhase+j&63:c.commandPhase=0,c.slideShift=a.vibratable[(k<<6)+c.commandPhase]):c.slideShift=0;break;case 5:if(c.commandParam){if(j?c.commandPhase=c.commandPhase+j&63:c.commandPhase=0,q=c.commandValue2,c.commandValue2=a.vibratable[(k<<6)+c.commandPhase],q=-(c.commandValue2-q),0==q)break;c.attenuation.L+q<0?c.attenuation.L=0:c.attenuation.L+q>15?c.attenuation.L=15:c.attenuation.L+=q,c.attenuation.R+q<0?c.attenuation.R=0:c.attenuation.R+q>15?c.attenuation.R=15:c.attenuation.R+=q}break;case 6:c.commandParam&&(c.commandPhase=c.commandParam,c.commandParam=0),c.commandPhase?(d=0,c.commandPhase--):(c.ornament_cursor=0,d=c.ornament.data[c.ornament_cursor],i=-1);break;case 7:c.commandParam>0&&c.commandParam<c.ornament.end&&(d=0,c.ornament_cursor=c.commandParam),i=-1;break;case 9:c.commandParam>0&&(c.sample.releasable||c.commandParam<c.sample.end)&&(c.sample_cursor=c.commandParam,l=c.sample.data[c.sample_cursor],p.byte=l.volume.byte),i=-1;break;case 10:!c.commandPhase&&c.commandParam&&(c.commandPhase=j),c.commandPhase&&!--c.commandPhase&&(q=(7&c.commandParam)*(8&c.commandParam?-1:1),c.attenuation.L+q<0?c.attenuation.L=0:c.attenuation.L+q>15?c.attenuation.L=15:c.attenuation.L+=q,c.attenuation.R+q<0?c.attenuation.R=0:c.attenuation.R+q>15?c.attenuation.R=15:c.attenuation.R+=q);break;case 11:break;case 12:if(c.commandParam)if(15>j)switch(c.commandPhase){default:c.commandPhase=2;break;case 2:d+=j,c.commandPhase--;break;case 1:d+=k,c.commandPhase--}else 1&k&&(c.commandPhase=p.R,p.R=p.L,p.L=c.commandPhase,c.commandPhase=0);else c.commandPhase=0;break;case 14:2==j?(c.commandParam&=7,h=4^c.commandParam):(16&c.commandParam||(c.attenuation.byte=255),c.commandParam=(14&c.commandParam)<<1|129&c.commandParam,c.commandParam^=130,b.setRegData(24+g,c.commandParam),i=-1);break;default:i=-1}0>i&&(c.command=0,c.commandParam=0,c.commandPhase=0),p.L=Math.max(0,p.L-c.attenuation.L),p.R=Math.max(0,p.R-c.attenuation.R),b.setRegData(e,p.byte),c.tone?(m=this.calculateTone(c.tone,c.globalPitch,d,l.shift+c.slideShift),b.setRegData(8+e,m.cent),r=1&e?m.oct<<4:r|m.oct,m=null):1&e&&(r=0),b.setRegData(16+f,r),l.enable_freq&&(s|=o),4&h&&(t|=o,n=g<<2,u=u&240>>n|(3&h)<<n),c.sample_cursor+1>=c.sample.end?c.sample.releasable&&c.released?c.sample_cursor<255?c.sample_cursor++:(c.playing=!1,v&=~o,s&=~o):c.sample.loop===c.sample.end?(this.mode&pMode.PM_SAMP_OR_LINE||(c.sample_cursor=c.sample.end),c.playing=!1,v&=~o,s&=~o):this.mode===pMode.PM_LINE?(c.playing=!1,v&=~o,s&=~o):c.sample_cursor=c.sample.loop:c.sample_cursor++,c.ornament_cursor+1>=c.ornament.end?c.ornament_cursor=c.ornament.loop:c.ornament_cursor++}else 1&e&&(r=0),b.setRegData(e,0),b.setRegData(8+e,0),b.setRegData(16+f,r),s&=~o,t&=~o;return b.setRegData(20,s),b.setRegData(21,t),b.setRegData(22,u),this.mode&pMode.PM_SAMP_OR_LINE&&!v?(b.setRegData(24,0),b.setRegData(25,0),b.setRegData(28,2),this.mode=0):(b.setRegData(28,1),this.mode&pMode.PM_LINE&&this.currentTick>0?this.currentTick--:this.mode&pMode.PM_SONG_OR_POS&&this.prepareLine(!0,b)),p=null,b},a.prototype.prepareLine=function(a,b){if(this.currentTick)return this.currentTick--,!0;if(this.currentPosition>=this.position.length)return!1;(void 0===a||a===!0)&&(this.currentLine++,this.changedLine=!0),void 0===b&&(b=this.mode===pMode.PM_SAMPLE?this.rtSample:this.rtSong);var c,d,e,f,g=this.position[this.currentPosition];if(this.currentLine>=g.length){if(this.mode&pMode.PM_SONG){if(this.currentPosition++,this.currentPosition>=this.position.length){if(!this.loopMode)return this.currentLine--,this.stopChannel(),!1;this.currentPosition=this.repeatPosition}this.currentLine=0,this.changedPosition=!0,g=this.position[this.currentPosition]}else{if(!this.loopMode)return this.currentLine--,this.stopChannel(),!1;this.currentLine=0}b.replace(g.initParams),this.currentSpeed=g.speed}for(var h=0;6>h;h++)if(c=g.ch[h],e=this.pattern[c.pattern<this.pattern.length?c.pattern:0],!(this.currentLine>=e.end)){if(d=b.params[h],d.globalPitch=g.ch[h].pitch,d.playing=!0,f=e.data[this.currentLine],f.cmd)if(15==f.cmd&&f.cmd_data>0){if(this.currentSpeed=f.cmd_data,this.currentSpeed>=32){var i=(240&this.currentSpeed)>>4,j=15&this.currentSpeed;2>j||i==j?this.currentSpeed=i:1&this.currentLine&&(this.currentSpeed=i|j<<4)}d.command=d.commandParam=d.commandPhase=0}else d.command=f.cmd,d.commandParam=f.cmd_data,f.cmd!=d.command&&(d.commandPhase=0);else(f.tone||f.smp)&&(d.command=d.commandParam=d.commandPhase=0);if(f.volume.byte&&5!=d.command&&10!=d.command&&(d.attenuation.byte=~f.volume.byte),f.release)d.sample.releasable&&!d.released?d.released=!0:b.clearPlayParams(h);else{if(f.tone&&3==f.cmd&&f.cmd_data){d.commandValue1&&(d.tone=d.commandValue1,d.slideShift-=d.commandValue2);var k=this.calculateTone(d.tone,0,0,d.slideShift),l=this.calculateTone(f.tone,0,0,0),m=l.word-k.word;0===m?(d.tone=f.tone,d.commandValue1=d.commandValue2=0,d.command=d.commandParam=d.commandPhase=0):(d.commandValue1=f.tone,d.commandValue2=m+d.slideShift,d.commandPhase=(240&d.commandParam)>>4)}else f.tone&&(d.tone=f.tone,d.sample_cursor=0,d.ornament_cursor=0,d.slideShift=d.commandValue1=d.commandValue2=0,d.released=!1);f.smp&&(d.sample=this.sample[f.smp],d.sample_cursor=0,d.released=!1),f.orn?(d.ornament=this.ornament[f.orn],d.ornament_cursor=0):f.orn_release&&(d.ornament=this.ornament[0],d.ornament_cursor=0,(6==d.command||7==d.command)&&(d.command=d.commandParam=d.commandPhase=0))}}return this.currentSpeed>32?this.currentTick=1&this.currentLine?15&this.currentSpeed:(240&this.currentSpeed)>>4:this.currentTick=this.currentSpeed,this.currentTick--,!0},a.prototype.playLine=function(){return this.mode===pMode.PM_LINE&&this.currentTick>0?!1:(this.mixer.index=0,this.mode=pMode.PM_LINE,this.currentTick=0,this.prepareLine(!1))},a.prototype.playPosition=function(a,b,c){if((void 0===a||a===!0)&&(this.currentPosition=0),(void 0===c||c===!0)&&(this.currentLine=0),void 0===b&&(b=!0),this.currentPosition>=this.position.length)return!1;this.stopChannel(),this.mixer.index=0;var d=this.position[this.currentPosition];return this.currentLine>0?this.simulation(this.currentLine):(this.rtSong.replace(d.initParams),this.currentTick=0),this.changedLine=!0,this.changedPosition=!0,this.mode=b?pMode.PM_SONG:pMode.PM_POSITION,this.currentSpeed=d.speed,this.prepareLine(!1)},a.prototype.playSample=function(a,b,c,d){if(this.mode&(pMode.PM_SONG_OR_POS|pMode.PM_LINE))return 0;var e=this.rtSample;if(d){if(--d>5)return 0;if(e.params[d].playing)return 0}else{for(d=0;6>d&&e.params[d].playing;d++);if(6===d){var f=-1,g=-1;for(d=0;6>d;d++)e.params[d].sample===this.sample[a]&&e.params[d].sample_cursor>f&&(f=e.params[d].sample_cursor,g=d);if(0>g)return 0;d=g}}return e.clearPlayParams(d),e.params[d].playing=!0,e.params[d].tone=c,e.params[d].sample=this.sample[a],e.params[d].ornament=this.ornament[b],this.mixer.index=0,this.mode=pMode.PM_SAMPLE,++d},a.prototype.stopChannel=function(a){void 0===a&&(a=0);var b=this.mode===pMode.PM_SAMPLE?this.rtSample:this.rtSong;if(!(0>a||a>6)){if(0===a){for(;6>a;a++)b.clearPlayParams(a);return this.mode=pMode.PM_LINE,this.prepareFrame(b),this.currentTick=0,this.changedLine=!0,void this.SAA1099.setAllRegs(b)}b.clearPlayParams(--a)}},a.prototype.calculateTone=function(a,b,c,d){for(var e=a+b+c;0>e;)e+=96;for(;e>96;)e-=96;for(e=this.tones[e].word+d;0>e;)e+=2048;for(;e>=2048;)e-=2048;return new pTone(e)},a.prototype.countPatternUsage=function(a){if(a>=this.pattern.length)return 0;for(var b=0,c=0,d=this.position.length;d>c;c++)for(var e=0;6>e;e++)this.position[c].ch[e].pattern===a&&b++;return b},a.prototype.countPositionFrames=function(b){var c,d,e,f,g,h=this.position.length;if(void 0===b||0>b)for(c=0;h>c;c++)this.countPositionFrames(c);else if(h>b){for(f=this.position[b].speed,c=0,e=0;e<a.maxPatternLen;e++){for(d=0;6>d;d++)if(g=this.pattern[this.position[b].ch[d].pattern].data[e],15===g.cmd&&g.cmd_data>0&&(f=g.cmd_data,f>=32)){var i=(240&f)>>4,j=15&f;2>j||i===j?f=i:1&e&&(f=i|j<<4)}this.position[b].frames[e]=c,c+=f>32?1&e?15&f:(240&f)>>4:f}this.position[b].frames[e]=c}},a.prototype.storePositionRuntime=function(a){if(void 0===a||0>=a)return!1;var b=this.position[a-1]||this.nullPosition,c=this.position[a];return c&&c.initParams?(c.initParams.replace(b.initParams),this.simulation(b.length,a-1,c.initParams)):!1},a.maxPatternLen=128,a.vibratable=[0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,1,1,1,1,0,0,0,-1,-1,-1,-1,-2,-2,-2,-2,-2,-3,-3,-3,-3,-3,-3,-3,-3,-3,-3,-3,-2,-2,-2,-2,-2,-1,-1,-1,-1,0,0,0,1,1,2,2,3,3,4,4,4,4,5,5,5,5,5,5,5,5,5,4,4,4,4,3,3,2,2,1,1,0,0,0,-1,-1,-2,-2,-3,-3,-4,-4,-4,-4,-5,-5,-5,-5,-5,-5,-5,-5,-5,-4,-4,-4,-4,-3,-3,-2,-2,-1,-1,0,0,1,1,2,3,3,4,4,5,5,6,6,6,7,7,7,7,7,7,7,6,6,6,5,5,4,4,3,3,2,1,1,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6,-6,-6,-7,-7,-7,-7,-7,-7,-7,-6,-6,-6,-5,-5,-4,-4,-3,-3,-2,-1,-1,0,1,2,3,3,4,5,6,6,7,7,8,8,9,9,9,9,9,9,9,8,8,7,7,6,6,5,4,3,3,2,1,0,-1,-2,-3,-3,-4,-5,-6,-6,-7,-7,-8,-8,-9,-9,-9,-9,-9,-9,-9,-8,-8,-7,-7,-6,-6,-5,-4,-3,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,9,10,10,11,11,11,11,11,11,11,10,10,9,9,8,7,6,5,4,3,2,1,0,-1,-2,-3,-4,-5,-6,-7,-8,-9,-9,-10,-10,-11,-11,-11,-11,-11,-11,-11,-10,-10,-9,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,3,4,5,6,7,8,9,10,11,11,12,12,13,13,13,13,13,12,12,11,11,10,9,8,7,6,5,4,3,1,0,-1,-3,-4,-5,-6,-7,-8,-9,-10,-11,-11,-12,-12,-13,-13,-13,-13,-13,-12,-12,-11,-11,-10,-9,-8,-7,-6,-5,-4,-3,-1,0,1,3,4,6,7,8,10,11,12,12,13,14,14,15,15,15,15,15,14,14,13,12,12,11,10,8,7,6,4,3,1,0,-1,-3,-4,-6,-7,-8,-10,-11,-12,-12,-13,-14,-14,-15,-15,-15,-15,-15,-14,-14,-13,-12,-12,-11,-10,-8,-7,-6,-4,-3,-1,0,2,3,5,7,8,9,11,12,13,14,15,16,16,17,17,17,17,17,16,16,15,14,13,12,11,9,8,7,5,3,2,0,-2,-3,-5,-7,-8,-9,-11,-12,-13,-14,-15,-16,-16,-17,-17,-17,-17,-17,-16,-16,-15,-14,-13,-12,-11,-9,-8,-7,-5,-3,-2,0,2,4,6,7,9,11,12,13,15,16,17,18,18,19,19,19,19,19,18,18,17,16,15,13,12,11,9,7,6,4,2,0,-2,-4,-6,-7,-9,-11,-12,-13,-15,-16,-17,-18,-18,-19,-19,-19,-19,-19,-18,-18,-17,-16,-15,-13,-12,-11,-9,-7,-6,-4,-2,0,2,4,6,8,10,12,13,15,16,17,19,19,20,21,21,21,21,21,20,19,19,17,16,15,13,12,10,8,6,4,2,0,-2,-4,-6,-8,-10,-12,-13,-15,-16,-17,-19,-19,-20,-21,-21,-21,-21,-21,-20,-19,-19,-17,-16,-15,-13,-12,-10,-8,-6,-4,-2,0,2,4,7,9,11,13,15,16,18,19,20,21,22,23,23,23,23,23,22,21,20,19,18,16,15,13,11,9,7,4,2,0,-2,-4,-7,-9,-11,-13,-15,-16,-18,-19,-20,-21,-22,-23,-23,-23,-23,-23,-22,-21,-20,-19,-18,-16,-15,-13,-11,-9,-7,-4,-2,0,2,5,7,10,12,14,16,18,19,21,22,23,24,25,25,25,25,25,24,23,22,21,19,18,16,14,12,10,7,5,2,0,-2,-5,-7,-10,-12,-14,-16,-18,-19,-21,-22,-23,-24,-25,-25,-25,-25,-25,-24,-23,-22,-21,-19,-18,-16,-14,-12,-10,-7,-5,-2,0,3,5,8,10,13,15,17,19,21,22,24,25,26,26,27,27,27,26,26,25,24,22,21,19,17,15,13,10,8,5,3,0,-3,-5,-8,-10,-13,-15,-17,-19,-21,-22,-24,-25,-26,-26,-27,-27,-27,-26,-26,-25,-24,-22,-21,-19,-17,-15,-13,-10,-8,-5,-3,0,3,6,8,11,14,16,18,21,22,24,26,27,28,28,29,29,29,28,28,27,26,24,22,21,18,16,14,11,8,6,3,0,-3,-6,-8,-11,-14,-16,-18,-21,-22,-24,-26,-27,-28,-28,-29,-29,-29,-28,-28,-27,-26,-24,-22,-21,-18,-16,-14,-11,-8,-6,-3],a}();
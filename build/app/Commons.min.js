/*!
 * Commons: Common functions and helpers.
 * Copyright (c) 2015 Martin Borik <mborik@users.sourceforge.net>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom
 * the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS
 * OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF
 * OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(a){if(a.getCompatible=function(a,b,c,d){var e,f,g=a[b],h=["moz","webkit","o","ms","Moz","WebKit","O","MS"];if(!g)for(e=b[0],e>="a"&&"z">=e&&(b=e.toUpperCase()+b.substr(1)),e=0;e<h.length;e++)if(f=h[e]+b,g=a[f]){b=f;break}return g&&c?new a[b]:g?g:d?d:void 0},"now"in a.Date||(Date.now=function(){return(new Date).getTime()}),"performance"in a||(a.performance={}),!("now"in a.performance)){var b=Date.now();a.performance.timing&&a.performance.timing.navigationStart&&(b=a.performance.timing.navigationStart),a.performance.now=function(){return Date.now()-b}}a.browser=function(a){var b=!!a.opera||navigator.userAgent.indexOf(" OPR/")>=0,c={isOpera:b,isFirefox:"undefined"!=typeof InstallTrigger,isSafari:Object.prototype.toString.call(a.HTMLElement).indexOf("Constructor")>0,isChrome:!!a.chrome&&!b,isIE:/*@cc_on!@*/!1||!!document.documentMode};return c}(a),a.dev}(window);var SyncTimer=function(){this.callback=function(){},this.interval=10;var a=this,b=getCompatible(window,"requestAnimationFrame",!1,function(b){setTimeout(function(){b(performance.now())},a.interval)}),c=0,d=!1;return this.start=function(c,e){return d?!1:(void 0!==c&&(a.callback=c),void 0!==e&&(a.interval=e),d=!0,b(a.loop),!0)},this.pause=function(){d=!1},this.resume=function(){d=!0},this.loop=function(e){return d&&b(a.loop),e-c<a.interval?!1:(a.callback(),void(c=e))},this}();Object.defineProperties(Number.prototype,{abs:{enumerable:!0,value:function(){var a=this.valueOf(),b=a>>31;return(a^b)-b}},toWidth:{enumerable:!0,value:function(a){var b=""+this.abs();return("0000000000"+b).substr(-Math.max(a||0,b.length))}},toTimeString:{enumerable:!0,value:function(){var a=this.valueOf(),b=(a/60).abs(),c=(a%60).abs();return("0"+b).substr(-2)+":"+("0"+c).substr(-2)}}});
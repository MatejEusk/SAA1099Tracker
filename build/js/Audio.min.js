var AudioDriver=function(){function a(){var a=null,b=null,c=new(AudioContext||webkitAudioContext),d=function(b){var c=b.outputBuffer;a.getAudio(c.getChannelData(0),c.getChannelData(1),c.length)};null!=c.createScriptProcessor?b=c.createScriptProcessor(0,0,2):null!=c.createJavaScriptNode&&(b=c.createJavaScriptNode(0,0,2)),this.sampleRate=c.sampleRate,this.bufferSize=b.bufferSize,this.setAudioSource=function(b){a=b},this.play=function(){a&&a.getAudio&&(b.onaudioprocess=d,b.connect(c.destination))},this.stop=function(){b.onaudioprocess&&b.disconnect(c.destination),b.onaudioprocess=null}}function b(){this.sampleRate=44100,this.bufferSize=4096;var a=new Audio,b=new Float32Array(this.sampleRate>>1),c=b.length,d=null,e=null;a.mozSetup(2,this.sampleRate),this.setAudioSource=function(a){e=a},this.play=function(){if(null==d){var f=(new Date).getTime();d=setInterval(function(){var d=(new Date).getTime();if(250>d-f)for(c<b.length&&(c+=a.mozWriteAudio(b.subarray(c)));c>=b.length;){var g=b.length>>1,h=b.subarray(0,g),i=b.subarray(0,g);e.getAudio(h,i,g);for(var j=0,k=0;g>j;k++)b[j++]=h[k],b[j++]=i[k];c=a.mozWriteAudio(b)}f=d},125)}},this.stop=function(){null!=d&&(clearInterval(d),d=null)}}if(AudioContext||webkitAudioContext)return new a;if("undefined"!=typeof Audio)return new b;throw"Error: No audio driver found (incompatible or obsolete browser)"}();
/*
 * SAA1099Tracker v1.0.0
 * Copyright (c) 2011-2015 Martin BÃ³rik <martin@borik.net>
 */
var SAASound;!function(a){a.nSampleRate,a.nBufferSize}(SAASound||(SAASound={}));var SAASound;!function(a){var b=function(){function a(){this.cs_EnvData=[{nPhases:1,bLooping:!1,aLevels:[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]},{nPhases:1,bLooping:!0,aLevels:[[[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]],[[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14]]]},{nPhases:1,bLooping:!1,aLevels:[[[15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[14,14,12,12,10,10,8,8,6,6,4,4,2,2,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]},{nPhases:1,bLooping:!0,aLevels:[[[15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[14,14,12,12,10,10,8,8,6,6,4,4,2,2,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]},{nPhases:2,bLooping:!1,aLevels:[[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0]],[[0,0,2,2,4,4,6,6,8,8,10,10,12,12,14,14],[14,14,12,12,10,10,8,8,6,6,4,4,2,2,0,0]]]},{nPhases:2,bLooping:!0,aLevels:[[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0]],[[0,0,2,2,4,4,6,6,8,8,10,10,12,12,14,14],[14,14,12,12,10,10,8,8,6,6,4,4,2,2,0,0]]]},{nPhases:1,bLooping:!1,aLevels:[[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,2,2,4,4,6,6,8,8,10,10,12,12,14,14],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]},{nPhases:1,bLooping:!0,aLevels:[[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,2,2,4,4,6,6,8,8,10,10,12,12,14,14],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]}],this.bEnabled=!1,this.bNewData=!1,this.nNextData=0,this.bOkForNewData=!1,this.SetNewEnvData()}return a.prototype.InternalClock=function(){this.bEnabled&&!this.bClockExternally&&this.Tick()},a.prototype.ExternalClock=function(){this.bEnabled&&this.bClockExternally&&this.Tick()},a.prototype.SetEnvControl=function(a){return this.nResolution=!!(16&a),this.bEnabled=!!(128&a),this.bEnabled?void(this.bOkForNewData?(this.SetNewEnvData(a),this.bNewData=!1,this.bOkForNewData=!1):(this.SetLevels(),this.bNewData=!0,this.nNextData=a)):(this.nPhase=0,this.nPhasePosition=0,this.bEnded=!0,this.bOkForNewData=!0,this.bNewData=!0,this.nNextData=a,this.SetLevels())},a.prototype.Tick=function(){return this.bEnabled?void(this.bEnded||(this.nPhasePosition+=this.nResolution?2:1,this.nPhasePosition>=16?(this.nPhase++,this.nPhasePosition-=16,this.nPhase===this.nPhases?(this.bOkForNewData=!0,this.bLooping?(this.bEnded=!1,this.nPhase=0):(this.bEnded=!0,this.nPhase=this.nPhases-1,this.nPhasePosition=15,this.bOkForNewData=!0)):this.bOkForNewData=!1):this.bOkForNewData=!1,this.bNewData&&this.bOkForNewData?(this.bNewData=!1,this.bOkForNewData=!1,this.SetNewEnvData(this.nNextData)):this.SetLevels())):(this.bEnded=!0,this.nPhase=0,this.nPhasePosition=0,void(this.bOkForNewData=!0))},a.prototype.SetLevels=function(){var a=0+this.nResolution;this.nLeftLevel=this.pEnvData.aLevels[a][this.nPhase][this.nPhasePosition],this.bStereo?this.nRightLevel=15-a-this.nLeftLevel:this.nRightLevel=this.nLeftLevel},a.prototype.SetNewEnvData=function(a){void 0===a&&(a=0),this.nPhase=0,this.nPhasePosition=0,this.pEnvData=this.cs_EnvData[a>>1&7],this.bStereo=!!(1&a),this.bClockExternally=!!(32&a),this.nPhases=this.pEnvData.nPhases,this.bLooping=this.pEnvData.bLooping,this.nResolution=!!(16&a),this.bEnabled=!!(128&a),this.bEnabled?this.bEnded=!1:(this.bEnded=!0,this.nPhase=0,this.nPhasePosition=0,this.bOkForNewData=!0),this.SetLevels()},a.prototype.LeftLevel=function(){return this.nLeftLevel},a.prototype.RightLevel=function(){return this.nRightLevel},a.prototype.IsActive=function(){return this.bEnabled},a}();a.SAAEnv=b}(SAASound||(SAASound={}));var SAASound;!function(a){var b=function(){function b(b,c){this.nLevel=2,this.nCounter=this.nAdd=0,this.nCurrentOffset=this.nCurrentOctave=0,this.nNextOffset=this.nNextOctave=0,this.bIgnoreOffsetData=this.bNewData=this.bSync=!1,this.nSmpRate=a.nSampleRate*a.nBufferSize,this.pcConnectedNoiseGenerator=b,this.pcConnectedEnvGenerator=c,this.nConnectedMode=b?c?0:1:2,this.SetAdd()}return b.prototype.Level=function(){return this.nLevel},b.prototype.SetFreqOffset=function(a){this.bSync?(this.bNewData=!1,this.nCurrentOffset=a,this.nCurrentOctave=this.nNextOctave,this.SetAdd()):(this.nNextOffset=a,this.bNewData=!0,this.nNextOctave==this.nCurrentOctave&&(this.bIgnoreOffsetData=!0))},b.prototype.SetFreqOctave=function(a){this.bSync?(this.bNewData=!1,this.nCurrentOctave=a,this.nCurrentOffset=this.nNextOffset,this.SetAdd()):(this.nNextOctave=a,this.bNewData=!0,this.bIgnoreOffsetData=!1)},b.prototype.UpdateOctaveOffsetData=function(){this.bNewData&&(this.nCurrentOctave=this.nNextOctave,this.bIgnoreOffsetData||(this.nCurrentOffset=this.nNextOffset,this.bNewData=!1),this.bIgnoreOffsetData=!1,this.SetAdd())},b.prototype.Tick=function(){if(!this.bSync&&(this.nCounter+=this.nAdd,this.nCounter>=this.nSmpRate)){for(;this.nCounter>=this.nSmpRate;)this.nCounter-=this.nSmpRate,this.nLevel=2-this.nLevel,1===this.nConnectedMode?this.pcConnectedEnvGenerator.InternalClock():2===this.nConnectedMode&&this.pcConnectedNoiseGenerator.Trigger();this.UpdateOctaveOffsetData()}return this.nLevel},b.prototype.Sync=function(a){this.bSync=a,a&&(this.nCounter=0,this.nLevel=2,this.nCurrentOctave=this.nNextOctave,this.nCurrentOffset=this.nNextOffset,this.SetAdd())},b.prototype.SetAdd=function(){this.nAdd=(15625<<this.nCurrentOctave)/(511-this.nCurrentOffset)>>0},b}();a.SAAFreq=b}(SAASound||(SAASound={}));var SAASound;!function(a){var b=function(){function b(b){void 0===b&&(b=286331153),this.nCounter=0,this.nAdd=31250*a.nBufferSize,this.bSync=!1,this.nSmpRate=a.nSampleRate*a.nBufferSize,this.nSource=0,this.nRand=b}return b.prototype.Level=function(){return(1&this.nRand)<<1},b.prototype.SetSource=function(b){this.nSource=b&=3,this.nAdd=(31250>>b)*a.nBufferSize},b.prototype.Trigger=function(){3===this.nSource&&this.ChangeLevel()},b.prototype.Tick=function(){if(!this.bSync&&3!=this.nSource&&(this.nCounter+=this.nAdd,this.nCounter>=this.nSmpRate))for(;this.nCounter>=this.nSmpRate;)this.nCounter-=this.nSmpRate,this.ChangeLevel();return 1&this.nRand},b.prototype.Sync=function(a){a&&(this.nCounter=0),this.bSync=a},b.prototype.ChangeLevel=function(){1073741828&this.nRand&&1073741828!=(1073741828&this.nRand)?this.nRand=this.nRand<<1|1:this.nRand<<=1},b}();a.SAANoise=b}(SAASound||(SAASound={}));